<!doctype html>
<html>
<head>
	<title></title>
	<meta charset="utf-8">
	<script src="jquery-3.2.1.min.js"></script>
	<script>
$( document ).on( 'click', '#intro button', function() {
	$( '#intro, #game' ).toggle();

	/*setInterval( function() {
		var flugzeug1 = new Flugzeug();
		flugzeug1.erzeugeDiv();
		flugzeug1.flieg();
	},2000);*/

});

Math.zufall = function(i,j) {
	return Math.floor( Math.random() * (j-i+1) ) + i;
}

var aktiviertesFlugzeug = false;
var Flugzeug = function() {

	this.farbe = 'black';
	this.posX = Math.zufall(0,308);
	this.posY = Math.zufall(0,468);
	this.vX = Math.zufall(-10,10)/10;
	this.vY = Math.zufall(-10,10)/10;
	this.htmlNode = false;
	this.erzeugeDiv = function() {

		this.htmlNode = $( '<div>' )
			.css({ top:this.posY, left:this.posX })
			/*.on( 'click', function() {
					$( this.htmlNode ).addClass( 'aktiviert' );
			}.bind(this) )*/
			.appendTo( '#field' );
	}
	this.flieg = function() {
		this.posX+=this.vX;
		this.posY+=this.vY;

		if ( this.posX > 308 ) {
			this.vX *= -1;
			this.posX = 308;
		}
		if ( this.posX < 0 ) {
			this.vX *= -1;
			this.posX = 0;
		}
		if ( this.posY > 468 ) {
			this.vY *= -1;
			this.posY = 468;
		}
		if ( this.posY < 0 ) {
			this.vY *= -1;
			this.posY = 0;
		}


		$( this.htmlNode )
			.css({ top:this.posY, left:this.posX });
		setTimeout( this.flieg.bind(this) , 40 );
	}
}

var flugzeuge = [];
var aktivesFlugzeug;

$( document ).on( 'click', '#game h1 img', function() {
	var flugzeug1 = new Flugzeug();
	flugzeug1.erzeugeDiv();
	flugzeug1.flieg();
	$( flugzeug1.htmlNode ).on( 'click', function( event ) {
		event.stopPropagation(); // klick nicht weitergeben
		$( '.aktiviert' ).removeClass( 'aktiviert' );
		$( this ).addClass( 'aktiviert' );
		//console.log( flugzeug1 );
		aktivesFlugzeug = flugzeug1;
	});
	flugzeuge.push( flugzeug1 );
});

$( document ).on( 'click', '#field', function( event ) {
	//console.log(  event.pageX, event.pageY );
	//console.log( $(this).offset() );
	var klickX = event.pageX - $(this).offset().left;
	var klickY = event.pageY - $(this).offset().top;
	//console.log( klickX, klickY );
	aktivesFlugzeug.vX = (klickX-aktivesFlugzeug.posX)/10;
	aktivesFlugzeug.vY = (klickY-aktivesFlugzeug.posY)/10;
});

/*$( document ).on( 'click', '#field div', function() {
	$( this ).addClass( 'aktiviert' );
});*/


	</script>
	<style>
#field div {
	width:10px;
	height:10px;
	border:1px solid #000;
	position:absolute;
}
#field .aktiviert {
	background:red;
}


	*{ margin:0; padding:0; }
	body { font:20px Arial; }
section {	position:fixed;	top:0;	left:0;	right:0;	bottom:0; text-align:center; display:flex; align-items:center; justify-content:center; }
section > div { max-width:65%; }
button { font:20px Arial; font-weight:bold; border:none; background:#339900; color:#fff; margin:20px; padding:5px 25px; cursor:pointer; border-radius:15px; }
#game {	display:none; }
#game > div { width:324px; }
#field {	border:2px solid #339900;	width:320px;	height:480px; position:relative; }
#status.active {
	animation:textblink 1s linear infinite;
}
@keyframes textblink {
	0% { opacity:1; }
	50% { opacity:0; }
	100% { opacity: 1; }
}
#logo {	width:45px;	height:45px;}
#game h1 { font-size:18px; line-height:60px; }
#game h1 > * { vertical-align:middle; }
.airplane {	cursor:pointer; transition:transform 0.5s; width:20px;	height:20px;
	background:url(black-plane.svg); background-size:20px 20px;
	 position:absolute; z-index:10; top:0;left:0; transform-origin:50% 50%;  }
.airplane.selected { background-image:url(black-plane-red.svg); }

airport { display:inline-block; position:absolute; z-index:1;
	border:1px solid #000; background:#ccc; width:16px; height:16px;
	border-radius:50%; font-size:10px;}

	</style>
</head>
<body>

<section id="intro">
	<div>
		<h1>WIFI Fluglotsen Diplom</h1>
		<button>Starte Simulation</button>
	</div>
</section>
<section id="game">
	<div>
		<h1><img src="d9-airplane/airplane-travelling-around-earth.svg" id="logo"> <span>Luftraumsimulation</span></h1>
		<div id="field">
		</div>
		<p>Status: <span id="status"></status></p>
	</div>
</section>


</body>
</html>
